{% extends 'base.html' %}
{% block content %}

<h2> Here are some habits I'd recommend for you <br> 
    based on how things are going for you right now</h2>

<div id='habits-div' class='form-inline'>
    </div>


<a id="get-recs" href="/get-recs.json">more recommendations</a>
<br>
<a href="/habits">browse all habits</a>

<script>

"use_strict";

function showRecs(results) {
    // json structure: { habit_id: 'id' { title: 'title', description: 'description'}}
    $('#habits-div').empty();
    var result = results
    for (var id in result) {
        var habit_id = id
        console.log(habit_id)
        var title = result[habit_id]["title"];
        var description = result[habit_id]["description"];
        var div = "<form action='/time' method='GET'><div id='habit-tile'><input type='hidden' name='habit_id' value=" +  habit_id + ">" + "<input type='submit' class='habit' value=" + "'" + title + ": " + description + "'" + "></div></form>";
        $('#habits-div').append(div);
    }
}

function firstRecs() {
    $.get('/get-recs.json', showRecs);
}

function updateRecs(evt) {
    evt.preventDefault();
    $.get('/get-recs.json', showRecs);
}

$('#get-recs').on('click', updateRecs);

firstRecs()

</script>

{% endblock %}
