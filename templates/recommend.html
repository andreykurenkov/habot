{% extends 'base.html' %}
{% block content %}
<br>
<br>

<div class='container-fluid' align="center" style="height:100px;">
<h2 id="habot-txt"></h2>
</div>

<div class='container-fluid' align="center">

<div id='habits-div' class='form-inline'>
    </div>


<a id="get-recs" href="/get-recs.json">show more recommendations</a>
<br>
<a href="/habits">browse all habits</a>

</div>

<script>

"use_strict";

function showRecs(results) {
    // json structure: { habit_id: 'id' { title: 'title', description: 'description'}}
    $('#habits-div').empty();
    var result = results
    for (var id in result) {
        var habit_id = id
        console.log(habit_id)
        var title = result[habit_id]["title"];
        var description = result[habit_id]["description"];
        var div = "<form action='/time' method='GET'><div id='habit-tile'><input type='hidden' name='habit_id' value=" +  habit_id + ">" + "<input type='submit' class='habit' value=" + "'" + title + ": " + description + "'" + "></div></form>";
        $('#habits-div').append(div);
    }
}

function firstRecs() {
    $.get('/get-recs.json', showRecs);
}

function updateRecs(evt) {
    evt.preventDefault();
    $.get('/get-recs.json', showRecs);
}

$('#get-recs').on('click', updateRecs);

firstRecs()


$('#habot-txt').typeIt({
    strings: ["I've selected a few habits for you.", "How do these feel to you?"],
    speed: 50,
    autoStart: false
});

</script>

{% endblock %}
